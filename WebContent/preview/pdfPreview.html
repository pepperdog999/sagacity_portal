<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>PDF预览</title>
<link href="../lib/css/public.css" type="text/css" rel="stylesheet" />
<link href="lib/css/preview.css" type="text/css" rel="stylesheet" />
<link href="lib/css/vertical.css" type="text/css" rel="stylesheet" />
</head>

<body>
<div class="yl">
	<h3 class="yl-tit">${(fileName)!}<span><a class="yl-btn">手机查看附件</a><a class="yl-btn">下载</a></span></h3>
	<div class="wrap">
		<div class="scrollbar">
			<div class="handle">
				<div class="mousearea"></div>
			</div>
		</div>
		<ul class="pages">
		</ul>
		<div class="frame">
	    	<ul class="items" id="items">
	    	</ul>
		</div>
	</div>
</div>

<script type="text/javascript" src="../lib/javascript/jquery-1.9.1.min.js"></script>
<script src="lib/javascript/plugins.js"></script>
<script src="lib/javascript/sly.min.js"></script>
<script type="text/javascript">
$(function() {
	var picFolder="${(parameters)!}";
	$.ajax({
        url: "../preview/getPDFImages",
        type: "GET",
        dataType: "json",
        data: {
        	folder : picFolder
        	},
        success: function(data) {
			if(data.Result){
				var html='';
				for (var i=0;i<data.picFileList.length;i++){
					html+='<li><img height="700px" src="'+data.picFileList[i]+'" /></li>';
				}
				$("#items").html(html);
				
				//初始化fly插件
				var $frame  = $('.frame');
				var $slidee = $frame.children('ul').eq(0);
				var $wrap   = $frame.parent();

				// Call Sly on frame
				$frame.sly({
					itemNav: 'basic',
					smart: 1,
					activateOn: 'click',
					mouseDragging: 1,
					touchDragging: 1,
					releaseSwing: 1,
					startAt: 1,
					scrollBar: $wrap.find('.scrollbar'),
					scrollBy: 1,
					pagesBar: $wrap.find('.pages'),
					activatePageOn: 'click',
					speed: 300,
					elasticBounds: 1,
					easing: 'easeOutExpo',
					dragHandle: 1,
					dynamicHandle: 1,
					clickBar: 1
				});
				
			}
        }
	});
});


</script>
</body>
</html>